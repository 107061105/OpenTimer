# OpenTimer <img align="right" width="10%" src="image/logo.png">

A High-performance Timing Analysis Tool for VLSI Systems.

# Why OpenTimer?

OpenTimer is a new static timing analysis (STA) tool to help IC designers
quickly verify the circuit timing.
It is developed completely from the ground up using C++17
to efficiently support parallel and incremental timing.

# Get Started with OpenTimer

The easiest way to start using OpenTimer is to use *OpenTimer shell*.
OpenTimer shell is a powerful tool for interactive analysis
and is the simplest way to learn core functionalities.
[Compile OpenTimer](#compile-opentimer) and launch the shell program `ot-shell`
under the `bin` directory.

```bash
~$ ./bin/ot-shell
  ____              _______              
 / __ \___  ___ ___/_  __(_)_ _  ___ ____
/ /_/ / _ \/ -_) _ \/ / / /  ' \/ -_) __/
\____/ .__/\__/_//_/_/ /_/_/_/_/\__/_/       v2.0.0 (alpha)
    /_/                                     
MIT License: type "license" to see more details.
To see the contributor list, type "contributors".
For help, type "help".
For bug reports, issues, and manual, please see:
<https://github.com/OpenTimer/OpenTimer>.
ot> 
```

We have provided a [simple design](./example/simple)
which consists of five gates (one NAND, one NOR, two INV, one FF) and one clock. 

<img src="image/simple_schematic.jpg" width="70%">[simple.v](./example/simple/simple.v)

Move to the folder and analyze the timing of this simple design.

```bash
ot> cd example/simple/
ot> read_celllib osu018_stdcells.lib  # read the cell library
ot> read_verilog simple.v             # read the verilog netlist
ot> read_spef simple.spef             # read the parasitics
ot> read_sdc simple.sdc               # read Synopsys Design Constraints
ot> report_timing                     # report the most critical path

Endpoint     :   f1:D
Startpoint   :   inp1
Path type    :   early
Required Time:   26.5196
Arrival Time :   3.222
Slack        :   -23.2976
----------------------------------
   Arrival       Delay   Dir   Pin
----------------------------------
         0         n/a  fall  inp1
   0.16108     0.16108  fall  u1:A
   2.98034     2.81926  rise  u1:Y
     3.012   0.0316606  rise  u4:A
   3.20226    0.190258  fall  u4:Y
     3.222    0.019743  fall  f1:D
----------------------------------
```

The critical path originates from the primary input `inp1` all the way 
to the data pin `f1:D` of the flip-flop `f1`.
You can dump a dot format and use online tools like [GraphViz][GraphViz]
to visualize the timing graph.

```bash
ot> dump_graph -o simple.dot  # dump the timing graph to the .dot format
```

![](image/simple_graph.png)

We have provided three vanilla command files, 
[simple.conf](./example/simple/simple.conf), 
[unit.conf](./example/simple/unit.conf), and 
[opt.conf](./example/simple/opt.conf)
to demonstrate more usages of OpenTimer. 
You can redirect it through stdin to OpenTimer shell.

```bash
cd example/simple
../../bin/ot-shell < simple.conf  # demonstrate the basic usage
../../bin/ot-shell < unit.conf    # demonstrate how to set units
../../bin/ot-shell < opt.conf     # modify the design and perform incremental timing
```

The following graph is generated after applying gate chaning operations in 
[opt.conf](./example/simple/opt.conf).
By default, OpenTimer performs parallel incremental timing to maintain slack integrity.

![](image/simple_opt_graph.png)

# Compile OpenTimer
OpenTimer is very self-contained and has very few dependencies.
The only thing you need is a GNU C++ Compiler G++ v7.2 with -std=c++1z.
We use [CMake](https://cmake.org/) to manage the source and tests.
We recommend using out-of-source build.

```bash
~$ cmake --version  # must be at least 3.6 or higher
~$ mkdir build
~$ cd build
~$ cmake ../
~$ make 
```

After successful build, you can find binaries and libraries in the folders `bin` 
and `lib`, respectively.

## Tests
OpenTimer uses [Doctest](https://github.com/onqtam/doctest) for unit tests and
[TAU15][TAU15] benchmarks for integration/regression tests. These benchmarks are generated by an 
industry standard timer and are being used by many EDA researchers.

```bash
~$ make test
```

# OpenTimer Shell

# Integrate OpenTimer to your Project

## C++ API



OpenTimer has very efficient data structures and procedures to
enable parallel and incremental timing.
The philosophy is to separate the API into three categories,
*Builder*, *Action*, and *Accessor*.

| Type |  Description | Example | Time Complexity |
| -------  |  ----------- |  --- | -- |
| Builder  | create lazy tasks to build the analysis framework | read_celllib, insert_gate, set_slew | O(1) |
| Action   | carry out builder operations to update the timing | update_timing, report_timing, report_slack | Algorithm-dependent |
| Accessors| inspect the timer without changing any internal data structures | dump_timer, dump_slack, dump_net_load | Operation-dependent |

# Examples

The folder [example](./example) contains several examples and is a great place to learn how to use OpenTimer.

| Example |  Description | Library |
| ------- |  ----------- | ------- |
| [simple](./example/simple) | A simple sequential circuit design with one FF, four gates, and a clock. | osu standard cell library |
| [c17](./example/c17) | A combinational circuit design with six NAND gates, no clock.| two libraries, one early and another late. |

The folder [benchmark](./benchmark) contains more designs but they are mainly used for internal regression 
and integration tests.


# Get Involved
+ Report bugs/issues by submitting a [Github issue][Github issues].
+ Submit contributions using [pull requests][Github pull requests].

# Who is Using OpenTimer?

OpenTimer is an award-winning tools. It won ACM TAU Timing Analysis Contests multiple times
([1st place][TAU14] in 2014, [2nd place][TAU15] in 2015, and [1st place][TAU16] in 2016)
and the [special price][LibreCores] from 2016 LibreCores Design Contest.
Many industry and academic people are using OpenTimer in their projects:

- [Golden Timer][TAU19], 2019 ACM TAU Timing Analysis Contest on Timing-driven Optimization
- [Golden Timer][TAU17], 2017 ACM TAU Timing Analysis Contest on Micro Modeling
- [Golden Timer][TAU16], 2016 ACM TAU Timing Analysis Contest on Micro Modeling
- [Golden Timer][ICCAD15], 2015 ACM/IEEE ICCAD Incremental Timing-driven Placement Contest
- [VSD][VSD], VLSI System Design Corporation
- [OpenDesign Flow Database][OpenDesign], the infrastructure for VLSI design and design automation research

Please [let me know][email me] if I forgot your project! To cite OpenTimer in your work, use:

+ [OpenTimer: A High-performance Timing Analysis Tool][OpenTimerPaper], IEEE/ACM ICCAD 2015.
+ [UI-Timer: An Ultra-fast Clock Network Pessimism Removal Algorithm][UI-TimerPaper], IEEE/ACM ICCAD 2014

We are growing our users to contribute to open-source EDA ecosystems. 
Feedback and suggestions are welcome.

# License

<img align="right" src="http://opensource.org/trademarks/opensource/OSI-Approved-License-100x137.png">

OpenTimer is licensed under the [MIT License](./LICENSE):

Copyright &copy; 2018 [Tsung-Wei Huang][Tsung-Wei Huang] and [Martin Wong][Martin Wong].

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


# Contributors
OpenTimer is being actively developed and contributed by the following people:
- [Tsung-Wei Huang][Tsung-Wei Huang] created the OpenTimer project is now the chief architect.
- [Martin Wong][Martin Wong] supported the OpenTimer project through NSF and DARPA funding.
- [Chun-Xun Lin][Chun-Xun Lin] implemented the prompt interface of OpenTimer shell.
- [Kunal Ghosh][Kunal Ghosh] provided a list of practical features to include in OpenTimer.
- [Pei-Yu Lee][Pei-Yu Lee] provided useful incremental timing discussion and helped fix bugs.
- [Tin-Yin Lai][Tin-Yin Lai] discussed micro modeling algorithms and helped fix bugs.
- [Jin Hu][Jin Hu] helped define the timing API and produced the golden benchmarks for integration tests.
- [Myung-Chul Kim][Myung-Chul Kim] helped test OpenTimer through ICCAD CAD contest.
- [George Chen][George Chen] helped defined path report formats and test OpenTimer through TAU contest.
- [Pao-I Chen][Pao-I Chen] helped design the logo of OpenTimer.

Please don't hesitate to [let me know][email me] if I forgot someone! 
Meanwhile, we appreciate the funding support from our sponsors to continue our development of OpenTimer.

![](image/nsf.png) ![](image/darpa.png)


* * *

[Tsung-Wei Huang]:       http://web.engr.illinois.edu/~thuang19/
[Chun-Xun Lin]:          https://github.com/clin99
[Martin Wong]:           https://ece.illinois.edu/directory/profile/mdfwong
[Kunal Ghosh]:           mailto:kunalpghosh@gmail.com
[Jin Hu]:                mailto:jinhu@umich.edu
[Myung-Chul Kim]:        mailto:mckima@us.ibm.com
[Tin-Yin Lai]:           mailto:tinyinlai@gmail.com
[Pei-Yu Lee]:            mailto:palacedeforsaken@gmail.com
[George Chen]:           mailto:george@geochrist.com
[Jignesh Shah]:          mailto:jignesh.shah@intel.com
[Pao-I Chen]:            mailto:poyipenny@gmail.com
[Github releases]:       https://github.com/OpenTimer/OpenTimer/releases
[Github issues]:         https://github.com/OpenTimer/OpenTimer/issues
[Github pull requests]:  https://github.com/OpenTimer/OpenTimer/pulls
[GraphViz]:              https://dreampuf.github.io/GraphvizOnline/
[OpenTimer-1.0]:         https://web.engr.illinois.edu/~thuang19/software/timer/OpenTimer.html
[OpenTimerCitation]:     https://scholar.google.com/scholar?oi=bibs&hl=en&cites=142282068238605079
[OpenTimerPaper]:        ./doc/iccad15.pdf
[UI-TimerPaper]:         ./doc/iccad14.pdf
[email me]:              mailto:twh760812@gmail.com
[VSD]:                   https://www.vlsisystemdesign.com/
[ICCAD15]:               http://cad-contest.el.cycu.edu.tw/problem_C/default.html
[TAU14]:                 https://sites.google.com/site/taucontest2014/
[TAU15]:                 https://sites.google.com/site/taucontest2015/
[TAU16]:                 https://sites.google.com/site/taucontest2016/
[TAU17]:                 https://sites.google.com/site/taucontest2017/
[TAU19]:                 https://sites.google.com/view/tau-contest-2019/home
[LibreCores]:            https://fossi-foundation.org/2016/10/13/designcontest
[OpenDesign]:            https://dl.acm.org/citation.cfm?id=2980074
[DARPA IDEA]:            https://www.darpa.mil/news-events/2017-09-13
  

